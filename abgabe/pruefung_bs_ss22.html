<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; padding-bottom: 0px !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    pre {
        page-break-inside: avoid;
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



</style><title>pruefung_bs_ss22</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='prüfung-betriebssysteme-ss-22'><span>Prüfung Betriebssysteme SS 22</span></h1><p><span>Im Sommersemester 2022 wird die Prüfungsleistung für das Modul Betriebssysteme nicht durch eine Klausur erbracht, sondern in Form einer Programmieraufgabe mit schriftlicher Ausarbeitung (Ausarbeitung im Umfang von bis zu 4 A4-Seiten).</span></p><p><span>Bitte lesen Sie sich diese Anleitung zur Prüfungsleistung gründlich durch.</span></p><p><span>Bei Fragen zur Aufgabenstellung schreiben Sie bitte eine Email an: </span><code>moeller@techfak.uni-...</code><span> (18.7.-22.7., danach Urlaub bis 14.8; ab 1.8. können Sie sich an die Tutoren Benedikt Volkmer oder Nils Beckmann via </span><code>bstut@techfak.uni-...</code><span> wenden). Es werden nur Fragen zur Aufgabenstellung beantwortet. Bitte schicken Sie auch keine Programme oder Programmteile in Ihrer Anfrage.</span></p><h2 id='aufgabenstellung'><span>Aufgabenstellung</span></h2><p><span>Zu erbringen ist die folgende Aufgabe zur betriebssystemnahen Programmierung in der Programmiersprache C im Betriebssystem Linux unter Nutzung der POSIX-Thread-Bibliothek.</span></p><h3 id='knn-verfahren'><span>KNN-Verfahren</span></h3><p><span>Zu implementieren ist eine parallele Variante des Verfahrens </span><strong><span>&quot;k-nearest neigbors&quot;</span></strong><span> (KNN, &quot;k nächste Nachbarn&quot;), siehe z.B. </span><a href='https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm' target='_blank' class='url'>https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm</a><span>. Dieses einfache Verfahren kann für die Klassifikation von Datenpunkten eingesetzt werden. Die </span><strong><span>Trainingsphase</span></strong><span> des Verfahrens besteht lediglich darin, dass alle Trainingsvektoren zusammen mit ihren Klassen abgespeichert werden. Für die </span><strong><span>Klassifikation</span></strong><span> eines Testvektors werden zunächst die </span><code>k</code><span> nächstgelegenen Trainingsvektoren ermittelt. Dabei ist die natürliche Zahl </span><code>k</code><span> (</span><code>k &gt;= 1</code><span>) der einzige Parameter des Klassifikators. Die Abstandsbestimmung erfolgt häufig über den euklischen Abstand (bzw. dessen Quadrat, um die Berechnung der Wurzel zu vermeiden). Dem Testvektor wird dann diejenige Klasse zugewiesen, welche unter den </span><code>k</code><span> Nachbarn am häufigsten auftritt.</span></p><p><span>Die Berechnung der Klassifikation ist zeitaufwändig, da bei der Klassifikation zunächst der Abstand zu allen Trainingsvektoren berechnet werden muss, unter denen dann die nächstgelegenen </span><code>k</code><span> durch Sortierung nach dem Abstand gefunden werden müssen. In praktischen Implementation wird diese Phase bspw. mit &quot;k-d trees&quot; beschleunigt; eine solche Vorverarbeitung soll (und darf) aber in dieser Aufgabe nicht erfolgen. Statt dessen soll die Abstandsberechnung und die eigentliche Klassifikation mithilfe von </span><strong><span>Threads</span></strong><span> realisiert werden, so dass sie auf mehreren CPU-Cores parallel ausgeführt werden kann.</span></p><h3 id='kreuzvalidierung'><span>Kreuzvalidierung</span></h3><p><span>In dieser Aufgabe soll allerdings keine einzelne Klassifikation, sondern eine </span><strong><span>Kreuzvalidierung</span></strong><span> durchgeführt werden, um den optimalen Wert für </span><code>k</code><span> zu bestimmen. Dabei kommen die Trainings- und Testvektoren aus demselben Datensatz der Größe </span><code>N</code><span>; dieser wird aus einer Datei eingelesen. Sie können davon ausgehen, dass in den verwendeten Dateien die Datenvektoren und ihre Klassen bereits in zufälliger Reihenfolge vorliegen, die beibehalten werden soll; dies ist auch in der bereitgestellten Datei </span><code>hsl_codebook.txt</code><span> der Fall. Der Datensatz wird dann in </span><code>B</code><span> annähernd gleich große Blöcke zerlegt (ist </span><code>N</code><span> ohne Rest durch </span><code>B</code><span> teilbar, sollen die Blöcke exakt gleich groß sein). Einer dieser Blöcke enthält die Testvektoren, die restlichen </span><code>B-1</code><span> Blöcke die Trainingsvektoren. Es werden nun alle Testvektoren für ein gegebenes </span><code>k</code><span> klassifiziert. Dann wird bestimmt, wieviele Testvektoren korrekt klassifiziert wurden, indem jeweils die tatsächliche Klasse mit dem Klassifikationsergebnis verglichen wird. Dies wird </span><code>B</code><span> mal wiederholt, wobei die Testvektoren jeweils aus einem anderen der </span><code>B</code><span> Blöcke stammen (mit den restlichen Blöcken als Trainingsvektoren). Die folgende Skizze erläutert diese Zerlegung:</span></p><p><img src="crossvalid.jpg" referrerpolicy="no-referrer" alt="crossvalid"></p><p><span>Es wird dann die </span><strong><span>Klassifikationsgüte</span></strong><span> (Gleitkommazahl im Format </span><code>double</code><span>, Intervall </span><code>[0,1]</code><span>) für einen Wert von </span><code>k</code><span> bestimmt. Diese ergibt sich aus allen in der Kreuzvalidierung durchgeführten Klassifikationen und stellt das Verhältnis aus </span><em><span>korrekten</span></em><span> Klassifikationen zur Anzahl </span><em><span>aller</span></em><span> Klassifikationen dar. Es wird schließlich mit </span><code>printf()</code><span> mit der Formatangabe </span><code>&quot;%d %g\n&quot;</code><span> der Wert von </span><code>k</code><span> und die Klassifikationsgüte auf der Standardausgabe ausgegeben.</span></p><p><span>Dieses Verfahren ist für alle </span><code>k</code><span> im Bereich von </span><code>1</code><span> bis zum Parameter </span><code>k_max</code><span> (Kommandozeilen-Parameter) zu wiederholen. Die entsprechenden Ausgaben erfolgen in aufeinanderfolgenden Zeilen für aufsteigende Werte von </span><code>k</code><span>. Anschließend ist der </span><strong><span>optimale Wert von </span><code>k</code></strong><span> zu bestimmen, für den die höchste Klassifikationsgüte erreicht wird. Dieser soll abschließend mit </span><code>printf()</code><span> mit der Formatangabe </span><code>&quot;%d\n&quot;</code><span> auf der Standardausgabe ausgegeben werden. Für diesen abschließenden Schritt lohnt sich keine Parallelisierung. Die Ausgabe sieht bspw. wie folgt aus (Parameter </span><code>N = 10000</code><span>, </span><code>k_max = 10</code><span>, </span><code>B = 5</code><span>, </span><code>n_threads = 20</code><span>):</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">% knn_moeller hsl_codebook.txt 10000 10 5 20</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">0 0.9751</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1 0.9774</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2 0.9812</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3 0.982</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">4 0.9819</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">5 0.9823</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">6 0.9826</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">7 0.9829</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">8 0.9829</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">9 0.9828</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">8</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 277px;"></div><div class="CodeMirror-gutters" style="display: none; height: 277px;"></div></div></div></pre><p><span>Dabei ist der Wert von </span><code>k</code><span> im Programm jeweils um </span><code>1</code><span> geringer als im Verfahren, da in der Programmiersprache </span><code>C</code><span> Felder beginnend mit </span><code>0</code><span> indiziert werden. Der Kommandozeilen-Parameter </span><code>k_max</code><span> gibt also im Programm die Anzahl der zu testenden Werte für </span><code>k</code><span> an (programm-intern </span><code>0</code><span> bis </span><code>k_max - 1</code><span>). </span></p><p><span>Bitte achten Sie darauf, dass Ihr Programm keine weiteren Ausgaben vornimmt, da die Ausgabe textlich mit der unseres Vergleichsprogramms vergleichen wird.</span></p><h3 id='parallelisierung'><span>Parallelisierung</span></h3><p><span>In Ihrer Implementation soll ein </span><strong><span>Thread-Pool</span></strong><span> zum Einsatz kommen, bei dem eine feste Anzahl von Worker-Threads gestartet wird, die blockierend auf die Zuweisung von Aufgaben warten. Dieselben Worker-Threads (die im Programm nur ein einziges Mal zu Beginn erzeugt werden) sollen anschließend mehrere Berechnungsphasen durchführen. Dabei werden den Worker-Threads zunächst Aufgaben für die 1. Berechnungsphase zugewiesen, nach deren Abschluss Aufgaben für die 2. Berechnungsphase usw. (Dies ist für die Parallelisierung des KNN-Verfahrens nicht zwingend erforderlich, kann aber bei komplexeren Aufgaben sinnvoll sein.) Die Berechnungsphasen sollen überlappen können, d.h. nach Abschluss einer Teil-Berechnung der 1. Phase kann bereits eine Aufgabe für die 2. Phase im Thread-Pool eingestellt werden. Es ist aber nicht zulässig, dass ein Thread in einer zugewiesenen Aufgabe sofort alle Berechnungsphasen für einen Teil der Daten ausführt.</span></p><p><span>Ihre Aufgabe besteht zunächst darin, den Thread-Pool mit 4 vorgegebenen Funktionen zu implementieren und dann den Ablauf mit mehreren Berechnungsphasen (außerhalb der Thread-Pool-Funktionen) zu realisieren. Realisieren Sie den Thread-Pool so, dass er auch für andere Aufgaben ohne Veränderung zum Einsatz kommen könnte (die zu realisierende Schnittstelle ist unten beschrieben).</span></p><p><span>Es sind </span><strong><span>3 Berechnungsphasen</span></strong><span> der Kreuzvalidierung mithilfe der POSIX-Thread-Bibliothek parallel zu realisieren: </span></p><ol start='' ><li><span>die Abstandsberechnung,</span></li><li><span>die Bewertung der Klassifikation für </span><code>B</code><span> Blöcke von Testvektoren und</span></li><li><span>die Ermittlung einer Klassifikationsgüte.</span></li></ol><p><span>In allen 3 Phasen soll mit ein und demselben </span><strong><span>Thread-Pool</span></strong><span> gearbeitet werden, die Threads sollen aber in jeder Phase eine unterschiedliche Aufgabe lösen. Die Anzahl der Threads </span><code>n_threads</code><span> wird als Kommandozeilen-Parameter übergeben. Es sind dann genau </span><code>n_threads</code><span> Worker-Threads zu starten. Jeder dieser Worker-Threads wartet blockierend, dass ihm eine Aufgabe zugeteilt wird (entwerfen Sie entsprechende Datenstrukturen für die 3 Phasen, welche die Aufgabe für </span><em><span>einen</span></em><span> Thread beschreiben).  Für die Realisierung des Thread-Pools entwerfen Sie eine Struktur </span><code>thread_pool_t</code><span>, welche alle für die Verwaltung der Worker-Threads im Pool notwendigen Informationen enthält. Schreiben Sie eine Funktion</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">thread_pool_init</span>(<span class="cm-variable">thread_pool_t</span><span class="cm-operator">*</span> <span class="cm-variable">thread_pool</span>, </span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">thread_count</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><p><span>welche einen Thread-Pool mit </span><code>thread_count</code><span> Worker-Threads anlegt und die entsprechende Zahl an Worker-Threads startet. Schreiben Sie eine Funktion</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">thread_pool_enqueue</span>(<span class="cm-variable">thread_pool_t</span><span class="cm-operator">*</span> <span class="cm-variable">thread_pool</span>, </span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable-3">void</span> <span class="cm-variable-3">*</span>(<span class="cm-operator">*</span><span class="cm-variable">function</span>) (<span class="cm-variable-3">void</span> <span class="cm-variable-3">*</span>), </span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable-3">void*</span> <span class="cm-variable">args</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><span>welche im Thread-Pool eine auszuführende Funktion </span><code>function</code><span> (übergeben als Funktionszeiger) inklusive der Argumente </span><code>args</code><span> (welche der Funktion, auf die </span><code>function</code><span> verweist, als Argument übergeben werden sollen) in einer Aufgabenliste registriert und dann einem Worker-Thread signalisiert, dass eine Aufgabe zur Ausführung vorliegt. In den Argumenten </span><code>args</code><span> sind z.B. Mengen von Indizes zu berechnender Datenvektoren zu kodieren (der Datentyp von </span><code>args</code><span> kann sich in den 3 Berechnungsphasen unterschieden, deswegen wird mit einem </span><code>void *</code><span> gearbeitet). Schreiben Sie desweiteren eine Funktion</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Task</span><span class="cm-operator">*</span> <span class="cm-def">thread_pool_wait</span>(<span class="cm-variable">thread_pool_t</span><span class="cm-operator">*</span> <span class="cm-variable">thread_pool</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>welche blockierend wartet, bis einer der Threads eine Aufgabe bearbeitet hat, und in der Datenstruktur </span><code>Task</code><span> die bei </span><code>thread_pool_enqueue()</code><span> übergebenen Argumente (</span><code>function</code><span> und </span><code>args</code><span>) zurückgibt. Dabei kann </span><code>args</code><span> auch Ergebniswerte beinhalten. Schreiben Sie schließlich eine Funktion</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">thread_pool_shutdown</span>(<span class="cm-variable">thread_pool_t</span> <span class="cm-operator">*</span><span class="cm-variable">thread_pool</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>welche alle Worker-Threads beendet und ggf. allozierte Daten freigibt. Diese Funktion soll erst nach Abschluss aller Berechnungen am Ende Ihres Programms aufgerufen werden.</span></p><p><span>Es sind die oben genannten 3 Berechnungsphasen durchzuführen, die aber überlappen können (d.h. dass z.B. Berechnungsaufträge für die 2. Phase bereits eingestellt werden können, auch wenn noch nicht alle Berechnungen der 1. Phase abgeschlossen sind):</span></p><ol start='' ><li><strong><span>Parallele Berechnung der </span><code>k_max</code><span> nächsten Nachbarn</span></strong><span>: Zur Vorbereitung der eigentlichen Kreuzvalidierung werden in dieser Phase alle erforderlichen Abstandsberechnungen durchgeführt (jeder Datenvektor aus einem Testblock zu allen Datenvektoren aus den verbleibenden Trainingsblöcken, wiederholt über alle Testblöcke). Dabei soll fortlaufend eine nach dem Abstand aufsteigend sortierte Liste der </span><code>k_max</code><span> nächsten Nachbarn für jeden Vektor im Datensatz aufgebaut werden, da diese Liste anschließend für jedes </span><code>k</code><span> von </span><code>1</code><span> bis </span><code>k_max</code><span> verwendet werden kann (vermeiden Sie eine nachträgliche Sortierung aller Abstände für einen Datenvektor; nur die ersten </span><code>k_max</code><span> Elemente müssen sortiert sein). Führen Sie diese Berechnungen parallel im Thread-Pool aus.</span></li><li><strong><span>Parallele Klassifikation und Bewertung</span></strong><span>: In dieser Phase erfolgt die Klassifikation der Testvektoren in jedem der </span><code>B</code><span> Blöcke. Dabei wird für jeden Wert von </span><code>k</code><span> ermittelt, welche Klasse unter den </span><code>k</code><span> Nachbarn am häufigsten auftritt (bei Gleichstand soll die Klasse mit dem höchsten Index gewinnen). Dies wird in einer geeigneten Datenstruktur vermerkt. Überlegen Sie auch hier, wie sie die Berechnung effizient fortlaufend für alle Werte von </span><code>k</code><span> durchführen können. Führen Sie diese Berechnungen parallel im Thread-Pool aus.</span></li><li><strong><span>Evaluation der Klassifikationsgüte</span></strong><span>: In dieser Phase wird für jeden Wert von </span><code>k</code><span> ausgewertet, ob die Klassifikation, die vom KNN-Verfahren ermittelt wurde, mit der im Datensatz enthaltenen Klasse des Datenvektors übereinstimmt. Es wird dann die Klassifikationsgüte bestimmt, welche das Verhältnis der Zahl der korrekten Klassifikationen und der Zahl aller Klassifikationen darstellt. Führen Sie diese Berechnungen parallel im Thread-Pool aus.</span></li></ol><p><span>Nach Abschluss der Berechnungen soll die Klassifikationsgüte für alle Werte von </span><code>k</code><span> und anschließend der optimale Wert von </span><code>k</code><span> wie oben beschrieben ausgegeben werden.</span></p><p><span>Die Ergebnisse der 3 Phasen, die von den einzelnen Worker-Threads berechnet werden, können in einer gemeinsam genutzten Datenstruktur abgelegt werden, die unter anderem die Datenvektoren und deren Klasse, Informationen zu den </span><code>k_max</code><span> nächsten Nachbarn und die erfolgte Klassifikation enthält.</span></p><p><span>Verarbeiten Sie alle Elemente der Datenvektoren mit Gleitkommazahlen vom Typ </span><code>double</code><span>. Berechnen Sie den Abstand in der Reihenfolge der Elemente, wie sie in der Datei vorgegeben ist. Indizes von Datenvektoren sollte mit dem Datentyp </span><code>long</code><span> verarbeitet werden, um Überläufe bei großen Daten zu vermeiden. Vermeiden Sie zufällige Komponenten in Ihrem Verfahren.</span></p><p><span>Bitte beachten Sie auch, dass ggf. (je nach Implementation) bei der Aufteilung der Daten auf die Threads die Grenzen zwischen den </span><code>B</code><span> Blöcken nicht überschritten werden dürfen.</span></p><p><strong><span>Format der Eingabedatei</span></strong><span>: Die Eingabedatei enthält die Daten in Textform. In der ersten Zeile steht die Anzahl der Datenvektoren, die Anzahl der Elemente jedes Datenvektors und die Anzahl der verschiedenen Klassen-Labels, jeweils mit Leerzeichen getrennt. In den folgenden Zeilen der Datei sind die Datenvektoren mit ihrer jeweiligen Klasse aufgeführt, jeweils mit einem Leerzeichen getrennt. In der Beispieldatei </span><code>hsl_codebook.txt</code><span> haben die Datenvektoren 4 Elemente und es gibt 2 Klassen (0, 1). Ihr Programm soll aber Dateien mit beliebiger Anzahl von Datenvektoren, Elementen und Klassen-Labels akzeptieren; beliebige Dateien dieser Art können beim Test Ihrer Abgabe zum Einsatz kommen.</span></p><p><strong><span>Quellcode</span></strong><span>: Ihr gesamter Quellcode muss in einer einzigen Datei (</span><code>knn_emustermann.c</code><span>, siehe unten) untergebracht sein. Außer der Standard-C-Bibliothek (die implizit verlinkt wird), der Mathe-Bibliothek (Option </span><code>-lm</code><span>) und der POSIX-Thread-Bibliothek (bitte beim Compileraufruf die Optionen </span><code>-pthread -lpthread</code><span> angeben) dürfen keine weiteren Bibliotheken benutzt werden. Bitte legen Sie auch keine Header-Dateien an (es kann nur eine einzige Quelldatei </span><code>knn_emustermann.c</code><span> abgegeben werden). Ihr Programm muss auf der Kommandozeile in dieser Reihenfolge </span></p><ul><li><span>den Namen der Eingabedatei,</span></li><li><span>die Anzahl </span><code>N</code><span> (Datentyp </span><code>long</code><span>) der einzulesenden Datenvektoren (es werden nur die ersten </span><code>N</code><span> Datenvektoren der Eingabedatei eingelesen),</span></li><li><span>den Parameter </span><code>k_max</code><span>, </span></li><li><span>den Parameter </span><code>B</code><span> </span></li><li><span>und den Parameter </span><code>n_threads</code><span> </span></li></ul><p><span>entgegennehmen. Es ist nicht gefordert, die Argumente auf gültige Bereiche hin zu testen.</span></p><p><span>Verwenden Sie für das Compilieren bspw. folgenden Aufruf (nutzen Sie </span><code>-O3</code><span>, um Ihr Programm optimieren zu lassen):</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">gcc -Wall -O3 -g -o knn_moeller knn_moeller.c -pthread -lpthread -lm</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><p><span>Für Zeitmessungen ist es am einfachsten, auf einer nur von Ihnen genutzten Maschine die </span><em><span>wall-clock time</span></em><span> zu messen, bspw. mit</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.52344px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">% /usr/bin/time -f "Zeit in Sek. %e" knn_moeller hsl_codebook.txt 100000 10 5 20</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">0 0.97424</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1 0.97836</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2 0.98099</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3 0.98242</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">4 0.98307</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">5 0.98286</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">6 0.98306</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">7 0.98294</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">8 0.98304</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">9 0.98296</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">4</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Zeit in Sek. 6.57</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 300px;"></div><div class="CodeMirror-gutters" style="display: none; height: 300px;"></div></div></div></pre><p><span>Zur Analyse Ihrer Abgabe muss Ihr Programm folgende Funktionalität in Abhängigkeit vom Parameter </span><code>n_threads</code><span> bieten (wird dies nicht realisiert, so gilt Ihr Programm als nicht funktionstüchtig, s.u.):</span></p><ul><li><code>n_threads = -1</code><span>: Es erfolgt nur das Laden der Datei, aber keine Berechnung. Wir ziehen diesen Wert von den Laufzeitmessungen bei der Bewertung ab. Manipulationen der Laufzeit für diesen Fall werden als Betrugsversuch gewertet.</span></li><li><code>n_threads = 0</code><span>: Es wird eine sequentielle Implementation des KNN-Verfahrens genutzt. Der Thread-Pool wird nicht genutzt. Die Ausgaben der Klassifikationsgüte und des optimalen Wertes für </span><code>k</code><span> erfolgt wie oben beschrieben. (Dieser Fall wird bei der Zeitmessung verwendet, um Zeitversatz bis zum Starten eines Threads aus der Messung zu eliminieren.)</span></li><li><code>n_threads &gt; 0</code><span>: Es wird die oben beschriebene Parallelisierung mit dem Thread-Pool verwendet. Die Ausgaben erfolgen wie oben beschrieben.</span></li></ul><h2 id='anmeldung-und-abgabe'><span>Anmeldung und Abgabe</span></h2><p><span>Es ist keine Anmeldung erforderlich.</span></p><p><span>Die Abgabe muss bis zum </span><strong><span>Sonntag, 14. August 2022, 23:59</span></strong><span> erfolgen. Eine verspätete Abgabe gilt als Nichtteilnahme. Die Deadline ist strikt. Die Abgabe erfolgt über die &quot;E-Prüfung&quot; im Lernraum der Betriebssysteme-Vorlesung (Zugang via eKVV). Bitte kennzeichnen Sie Programmdatei und Ausarbeitung mit Ihrem Account-Namen an der Technischen Fakultät. Für Erika Mustermann wäre dies z.B. </span><code>emustermann</code><span>. Die Programmdatei muss in diesem Beispiel den Dateinamen </span><code>knn_emustermann.c</code><span>, die Ausarbeitung den Dateinamen </span><code>ausarbeitung_emustermann.pdf</code><span> haben. Sie können Ihre Abgabe bis zur Deadline beliebig oft verändern. Bitte beachten Sie die Hinweise in der bereitgestellten Anleitung </span><code>Anleitung_E-Pruefung_BS.PDF</code><span>. </span><em><span>Hinweis: Bitte testen Sie den Abgabevorgang deutlich vor der Deadline.</span></em></p><h2 id='zweiter-prüfungsversuch'><span>Zweiter Prüfungsversuch</span></h2><p><span>Ein zweiter Prüfungsversuch im Sommersemester 2022 ist </span><strong><span>nur bei Teilnahme am ersten Versuch</span></strong><span> möglich. Dies ist sowohl bei Bestehen als auch bei Nichtbestehen im ersten Versuch möglich (eine Wiederholung bei Bestehen ist aber bei einer unbenoteten Leistung nicht sinnvoll). Bitte beachten Sie, dass in jedem Fall auch die Leistung des ersten Versuchs eingetragen wird.</span></p><p><span>Die Wiederholung erfolgt durch </span><strong><span>Überarbeitung von Programm und Ausarbeitung mit demselben Thema</span></strong><span>. Für die Überarbeitung wird eine </span><strong><span>Frist von 2 Wochen</span></strong><span> nach der Mitteilung der Bewertung des ersten Versuchs eingeräumt.</span></p><p><span>In nachfolgenden Semestern gilt die dann festgelegte Prüfungsform (in der Regel eine Klausur).</span></p><h2 id='programm'><span>Programm</span></h2><p><span>Es wird kein Rahmenprogramm vorgegeben. Ihr Programm muss aber die oben angegebenen Funktionsnamen für die Thread-Pool-Funktionen nutzen und die oben angegebenen Kommandozeilen-Parameter akzeptieren, wobei die Spezialfälle für </span><code>n_threads</code><span> zu beachten sind  (ist das Programm nicht in dieser Form nutzbar, wird es als nicht funktionstüchtig bewertet). Ihr Programm muss die Ausgaben </span><em><span>exakt</span></em><span> in der oben genannten Form liefern (ist dies nicht der Fall, so werden die Programmausgaben beim automatisierten Test als falsch bewertet).</span></p><p><span>Gefordert ist ein C-Programm, welches unter Linux compilierbar und ausführbar ist. Die Verwendung von C++ ist nicht erlaubt. Die Verwendung zusätzlicher Bibliotheken (z.B. für Datenstrukturen wie Listen) ist nicht erlaubt; lediglich die C-Standard-Library, die Mathe-Bibliothek (Compiler-Option </span><code>-lm</code><span>) und die POSIX-Thread-Library dürfen verwendet werden, nicht aber Funktionen der </span><code>glibc</code><span>. Sie dürfen Ihre eigene Implementation einer doppelt verketteten Liste aus den Übungen verwenden, falls dies erforderlich ist (bitte nehmen Sie den Code direkt in das Rahmenprogramm auf).</span></p><p><span>Bitte legen Sie keine weiteren Quellcode-Dateien an (diese könnten auch nicht abgegeben werden). Bringen Sie Ihren gesamten Code in der Datei </span><code>knn_emustermann.c</code><span> unter. Kann Ihr Programm wegen fehlender weiterer Quellcode-Dateien, Header-Dateien oder Bibliotheken nicht erfolgreich compiliert werden, wird es als nicht funktionstüchtig bewertet (siehe unten).</span></p><p><span>Ihr Programm muss mit der vorgegebenen Version des Compilers </span><code>gcc</code><span> compilierbar sein (s.u.).</span></p><p><span>Bitte kommentieren Sie Ihr Programm möglichst ausführlich, um bei Unklarheiten in der Bewertung eine Orientierung im Code zu erleichtern.</span></p><h2 id='ausarbeitung'><span>Ausarbeitung</span></h2><h3 id='format'><span>Format</span></h3><p><span>Auf einer vorangestellten Titelseite geben Sie bitte &quot;Ausarbeitung  Betriebssysteme Sommersemester 22&quot; mit dem Titel &quot;Parallelisierung des KNN-Verfahrens&quot; sowie </span><strong><span>Ihren Namen, Vornamen, Studiengang und Ihre Matrikelnummer</span></strong><span> an. Fügen Sie darunter bitte folgenden Text ein: </span></p><blockquote><p><span>&quot;Hiermit erkläre ich, dass ich das Programm und die vorliegende Ausarbeitung selbstständig verfasst habe. Ich habe keine anderen Quellen als die angegebenen benutzt und habe die Stellen in Programm und in der Ausarbeitung, die anderen Quellen entnommen wurden, in jedem Fall unter Angabe der Quelle als Entlehnung kenntlich gemacht. Diese Erklärung gilt auch ohne meine Unterschrift, sobald ich das Programm und die Ausarbeitung über die E-Prüfung der Vorlesung Betriebssysteme im Lernraum des eKVV an der Universität Bielefeld und unter Angabe meiner Matrikelnummer in der Ausarbeitung eingereicht habe.&quot;</span></p></blockquote><p><span>Die eigentliche Ausarbeitung umfasst </span><strong><em><span>bis zu</span></em><span> 4 A4-Seiten</span></strong><span> mit einer Textbreite von 16 cm und einer Texthöhe von 23 cm. Der Text ist im Zeilenabstand &quot;ein-einhalb-zeilig&quot; zu formatieren. Als Schriftart wählen Sie dabei bitte Times-Roman in der Größe 12 pt. Bitte beachten Sie: Bei Abgaben, welche die Seitenbegrenzung überschreiten, wird nur der Teil bis zum Erreichen der maximalen Seitenzahl bewertet. Bei Abgaben, die Zeilenabstand und / oder Schriftgröße verringern, wird nur der Teil bis zu einer entsprechenden Wortzahl bewertet. Das Erreichen der maximalen Seitenzahl ist nicht erforderlich (entscheidend für die Bewertung des Umfangs ist die inhaltliche Vollständigkeit).</span></p><p><span>Die </span><strong><span>Liste Ihrer Quellen</span></strong><span> (Literatur, Webseiten etc.) geben Sie bitte nachfolgend zum eigentlichen Text an, beginnend auf einer neuen Seite.</span></p><p><span>Die Titelseite und die Seite(n) mit der Liste der Quellen werden nicht bei der Seitenzählung berücksichtigt.</span></p><p><span>Das eingereichte </span><strong><span>PDF-Dokument muss ein Format aufweisen, aus dem der Text extrahiert werden kann</span></strong><span> (für den Plagiatstest, siehe unten). Vermeiden Sie deshalb bitte Rastergrafiken für Text und verschlüsselte Formate. Die Abgabe wird als nicht bestanden bewertet, falls auf eine einmalige Nachfrage per Email keine für die Plagiatsprüfung geeignete Fassung zur Verfügung gestellt wird. </span><em><span>Hinweis: Sie können die Extrahierbarkeit von Text z.B. mit dem Linux-Tool </span><code>pdftotext</code><span> testen.</span></em></p><p><span>Sie können die bereitgestellte </span><strong><span>LaTeX-Vorlage</span></strong><span> </span><code>ausarbeitung_emustermann.tex</code><span> verwenden. Diese enthält bereits einen Vorschlag für eine inhaltliche Gliederung nach den untenstehenden Angaben. Behalten Sie diese bitte möglichst bei.</span></p><h3 id='inhalt'><span>Inhalt</span></h3><p><span>Bitte </span><em><span>vermeiden</span></em><span> Sie eine Einführung, in der Sie grundlegendes Wissen zu Threads und Synchronisationsmechanismen oder zum KNN-Verfahren wiedergeben. Folgen Sie bitte möglichst der vorgegebenen Gliederung in der LaTeX-Vorlage.</span></p><h4 id='beschreibung-der-lösung'><span>Beschreibung der Lösung</span></h4><p><span>Erklären Sie die von Ihnen gewählte Lösung. Bitte beschreiben Sie dabei aber nicht Programmdetails, sondern erklären Sie den grundlegenden Ansatz für die Parallelisierung. Gehen Sie dabei auch auf folgende Aspekte ein:</span></p><ul><li><strong><span>Thread-Pool</span></strong><span>: Beschreiben Sie die Implementation der 4 Funktionen des Thread-Pools. Gehen Sie dabei auf die Verwaltung der Threads und auf die verwendeten Synchronisationsmechanismen ein. Beschreiben Sie auch wichtige Aspekte hinsichtlich des Entwurfs der Struktur </span><code>thread_pool_t</code><span>.</span></li><li><strong><span>Ablauf</span></strong><span>: Beschreiben Sie den grundlegenden Ablauf in den 3 Berechnungsphasen.</span></li><li><strong><span>Aufteilung innerhalb der Berechnungsphasen:</span></strong><span> Beschreiben Sie die Art und Weise, in der die Berechnungen in den beiden Phasen jeweils unter den Worker-Threads aufgeteilt werden, inklusive der Datenstrukturen, die für die Zuweisung der Aufgaben an die Worker-Threads genutzt werden. Beschreiben Sie die Datenstruktur, in der die Ergebnisse abgelegt werden.</span></li><li><strong><span>Koordination der Berechnungsphasen:</span></strong><span> Beschreiben Sie, wie sie die überlappende Berechnung der 3 Berechnungsphase realisiert haben (wie erfolgt die Erteilung einer Aufgabe im nachfolgenden Berechnungsschritt, sobald eine Teilaufgabe des aktuellen Schritts abgeschlossen wurde).</span></li><li><span>Welche </span><strong><span>Schwachstellen</span></strong><span> Ihres Verfahrens und welche </span><strong><span>Verbesserungsmöglichkeiten</span></strong><span> sehen Sie?</span></li></ul><h4 id='analyse-der-laufzeiten'><span>Analyse der Laufzeiten</span></h4><p><span>Vergleichen Sie die Laufzeit Ihres parallelisierten Verfahrens mit dem sequentiellen Programm für </span><code>B = 5</code><span>, </span><code>k_max = 20</code><span> und verschiedene Anzahlen von Threads </span><code>n_threads</code><span>; wählen Sie </span><code>N</code><span> dabei so, dass die Berechnungszeiten im Sekundenbereich liegen. Stellen Sie die Ergebnisse grafisch dar und diskutieren Sie die Abhängigkeit der Laufzeiten von der Anzahl der Threads </span><code>n_threads</code><span> (mit Bezug auf die Anzahl der CPU-Cores, siehe </span><code>more /proc/cpuinfo</code><span>) und der Anzahl der Elemente </span><code>N</code><span> aus dem Datensatz. Verwenden Sie dabei stets Beschleunigungsfaktoren in Bezug auf das sequentielle Vergleichsprogramm, keine absoluten Messungen. Erklären Sie ausführlich die </span><strong><span>Faktoren, die den Leistungsgewinn durch die Parallelisierung begrenzen</span></strong><span> können.</span></p><h2 id='hinweise-zur-einzelleistung-und-zu-betrugsversuchen'><span>Hinweise zur Einzelleistung und zu Betrugsversuchen</span></h2><p><span>Die Programmieraufgabe mit Ausarbeitung ist ein Ersatz für eine Klausur. In einer Klausur ist sichergestellt, dass die Leistung als </span><strong><span>Einzelleistung</span></strong><span> erbracht wird. Derselbe Maßstab gilt auch für die Programmieraufgabe mit Ausarbeitung. </span><strong><span>Eine Zusammenarbeit mit anderen Personen in jeglicher Form gilt deshalb als Betrugsversuch.</span></strong><span> Für Programmdatei und Ausarbeitung wird ein elektronischer Plagiatstest durchgeführt. Dadurch aufgedeckte </span><strong><span>Betrugsversuche werden geahndet</span></strong><span>: Gespräch mit dem Modulverantwortlichen, ggf. Meldung ans Prüfungsamt mit Vermerk, Eintragung der Leistung als &quot;nicht bestanden&quot;, Ausschluss vom zweiten Versuch im SS 22, Schreiben vom Dekan, mögliche Exmatrikulation bei weiteren (vorherigen oder nachfolgenden) Betrugsversuchen.</span></p><p><span>Wir recherchieren im Vorfeld mögliche </span><strong><span>Quellen im Internet</span></strong><span>. Bitte denken auch Sie daran, dass eventuell auch andere TeilnehmerInnen dieselben Quellen verwenden. Auch wenn wir diese Quellen nicht kennen sollten, würde dadurch ein Betrugsversuch aufgedeckt.</span></p><p><span>Bitte wenden Sie sich mit Fragen zur Aufgabenstellung oder bei technischen Fragen nur an den Veranstalter bzw. die zwei benannten Tutoren (Email, s.o.), nicht an KommilitonInnen oder an andere TutorInnen.</span></p><p><span>Sowohl im Quellcode Ihres Programms als auch in Ihrer Ausarbeitung müssen </span><strong><span>alle</span></strong><span> </span><strong><span>verwendeten Quellen gekennzeichnet</span></strong><span> sein. Im </span><strong><span>Quellcode</span></strong><span> sind alle Programmteile, die aus anderen Quellen (bspw. Hilfeseiten im Internet) stammen, zu kennzeichnen. Diese Teile gelten allerdings nicht als selbst erbrachte Leistung; die erreichte Punktzahl wird entsprechend reduziert. Wird die Quelle nicht angegeben, liegt ein Betrugsversuch vor. Wenn Sie selbst Teile Ihres Programms öffentlich im Internet zugänglich machen, werten wir Ihre Abgabe als Plagiat der Internet-Quelle (die Internet-Quelle gilt dabei als nicht selbst verfasst, auch wenn sie unter Ihrem Klarnamen veröffentlicht wurde). In der </span><strong><span>Ausarbeitung</span></strong><span> müssen wörtliche Zitate (auch Übersetzungen) gekennzeichnet sein. Bei zu großem Anteil (gekennzeichneter) wörtlicher Übernahmen gelten diese Teile der Ausarbeitung nicht mehr als selbst erbrachte Leistung; die erreichte Punktzahl wird entsprechend reduziert.</span></p><h2 id='bewertungskriterien'><span>Bewertungskriterien</span></h2><p><span>Die Leistung ist unbenotet. Abweichungen von dieser Vorgabe sind mit dem Prüfungsamt zu klären.</span></p><p><strong><span>Die maximale erreichbare Punktzahl ist 100.</span></strong><span> Die Bestehensgrenze ist 50% (50 Punkte).  50 Punkte werden aus der Bewertung des Programms ermittelt, 50 Punkte aus der Bewertung der Ausarbeitung des Programms. Da Ausarbeitung und Programm in engem Bezug stehen, kann die Leistung nur bestanden werden, wenn für das </span><strong><span>Programm mindestens 15 Punkte</span></strong><span> </span><em><span>und</span></em><span> für die </span><strong><span>Ausarbeitung mindestens 15 Punkte</span></strong><span> erreicht werden; zudem müssen in der </span><strong><span>Summe mindestens 50 Punkte</span></strong><span> erreicht werden.</span></p><p><span>Es wird zunächst geprüft, ob Ihr Programm die Aufgabenstellung erfüllt, d.h. tatsächlich eine Parallisierung des KNN-Verfahrens mit Threads in der POSIX-Thread-Bibliothek in der Programmiersprache C für das Betriebssystem Linux vorliegt. Ist dies nicht der Fall, gilt die Aufgabe als nicht erfüllt und die Prüfung damit als nicht bestanden. Ansonsten erfolgt die Bewertung wie folgt:</span></p><h3 id='bewertung-des-programms'><span>Bewertung des Programms</span></h3><p><span>Die Bewertung des Programms erfolgt mit bis zu 50 Punkten. Es müssen mindestens 15 Punkte erreicht werden.</span></p><p><strong><span>Realisierung des Thread-Pools und der 3 überlappenden Berechnungsphasen (10 Punkte)</span></strong><span>: Es werden 5 Punkte für die korrekte Realisierung der 4 Funktionen des Thread-Pools und 5 Punkte für die überlappende Abstandsberechnung vergeben.</span></p><p><strong><span>Funktionstüchtigkeit des Programms (10 Punkte)</span></strong><span>: Ihre Abgabe wird von uns mit dem C-Compiler </span><code>gcc</code><span> in der Version auf den unten genannten Maschinen (</span><code>7.5.0</code><span>) zu einer ausführbaren Datei compiliert. Ein nicht compilierbares Programm wird nicht weiter untersucht und gilt als &quot;nicht funktionstüchtig&quot; (0 Punkte). </span><em><span>Hinweis: Bitte testen Sie deshalb vor Abgabe auf einer der genannten Maschinen, ob Ihr Programm mit diesem Compiler compilierbar ist!</span></em><span> Ein compilierbares Programm wird von uns einem oder mehreren Tests mit unterschiedlichen Dateien und unterschiedlichen Parametern </span><code>N</code><span>, </span><code>k_max</code><span>, </span><code>B</code><span> und </span><code>n_threads</code><span> getestet. Der Anteil der Testläufe, bei denen Ihr Programm exakt dieselbe Ausgabe wie unser Vergleichsprogramm erzeugt, bestimmt den Grad der Funktionstüchtigkeit und damit die zugewiesene Punktzahl (bspw. funktionstüchtig in der Hälfte der Fälle: 5 Punkte). Beachten Sie die o.g. Formatvorgaben für die Ausgaben des Programms (ansonsten werden 0 Punkte für diesen Teil erteilt). Bitte vermeiden Sie Zufallskomponenten in Ihrem Programm, da diese das Ergebnis verändern können. Halten Sie sich an die vorgeschriebenen Datentypen (s.o.). </span><em><span>Hinweis: Testen Sie Ihr Programm vor Abgabe ausführlich unter Variation der genannten Parameter.</span></em></p><p><strong><span>Laufzeitvorteil durch Parallelisierung (15 Punkte):</span></strong><span> Es wird die Beschleunigung der Verarbeitung gegenüber der sequentiellen Variante (</span><code>n_threads = 0</code><span>) für eine Eingabedatei und einen Parametersatz (</span><code>N</code><span> für Laufzeiten im Sekundenbereich, </span><code>B = 5</code><span>, </span><code>k_max = 20</code><span>,  </span><code>n_threads</code><span> entsprechend der Anzahl der CPU-Cores auf der Testmaschine) bestimmt. Die Laufzeiten werden auf der Kommandozeile mit </span><code>/usr/bin/time -f %e</code><span> gemessen und mit der unseres Vergleichsprogramms verglichen. Bewertungsskala:</span></p><ul><li><span>Beschleunigung größer als 90% der unseres Vergleichsprogramms: 15 Punkte, ansonsten</span></li><li><span>Beschleunigung größer als 60% der unseres Vergleichsprogramms: 10 Punkte, ansonsten</span></li><li><span>Beschleunigung größer als 30% der unseres Vergleichsprogramms: 5 Punkte, ansonsten</span></li><li><span>0 Punkte.</span></li></ul><p><span>Ein nicht compilierbares oder nicht zumindest bei einem Laufzeittest funktionstüchtiges Programm erhält hierbei 0 Punkte.</span></p><p><strong><span>Laufzeitvergleich (15 Punkte):</span></strong><span> Ermittelt wird die relative Laufzeit Ihres Programms für die oben bei &quot;Laufzeitvorteil&quot; angegebenen Parameter aber mit </span><code>n_threads = 0</code><span> im Vergleich zu unserer eigenen Implementation. Die Laufzeiten werden auf der Kommandozeile mit </span><code>/usr/bin/time -f %e</code><span> gemessen. Bewertungsskala:</span></p><ul><li><span>relative Laufzeit kleiner als 120%: 15 Punkte, ansonsten</span></li><li><span>relative Laufzeit kleiner als 150%: 10 Punkte, ansonsten</span></li><li><span>relative Laufzeit kleiner als 200%: 5 Punkte, ansonsten</span></li><li><span>0 Punkte.</span></li></ul><p><span>Ein nicht compilierbares oder nicht zumindest bei einem Laufzeittest funktionstüchtiges Programm erhält hierbei 0 Punkte.</span></p><p><span>Bei allen Zeitmessungen wird der Wert für das Laden der Datei (</span><code>n_threads = -1</code><span>) abgezogen.</span></p><p><span>Die Zeitmessungen erfolgen auf einem von uns ausgewählten, beliebigen Rechner.</span></p><h3 id='bewertung-der-ausarbeitung'><span>Bewertung der Ausarbeitung</span></h3><p><span>Die Bewertung der Ausarbeitung erfolgt mit bis zu 50 Punkten. Es müssen mindestens 15 Punkte erreicht werden.</span></p><p><strong><span>Ausarbeitung in deutscher Sprache (50 Punkte):</span></strong><span> Die Ausarbeitung ist in deutscher Sprache vorzulegen (zu Ausnahmen s.u.). In die Bewertung fließen ein:</span></p><ul><li><span>die verständliche und vollständige Darstellung des gewählten Ansatzes für die Parallelisierung (max. 25 Punkte)</span></li><li><span>die verständliche und umfassende Analyse der Laufzeiten inklusive Diskussion (max. 25 Punkte).</span></li></ul><p><span>Bitte achten Sie auf eine verständliche Beschreibung. Vermeiden Sie Programmdetails in Ihrer Beschreibung. Schreiben Sie bspw. &quot;</span><em><span>In einer Schleife werden dann alle </span><code>m</code><span> Threads gestartet</span></em><span>&quot; und nicht &quot;</span><em><span>Es wird eine </span><code>for</code><span>-Schleife mit der Laufvariablen </span><code>i</code><span>, Startwert 0 und Abbruch bei </span><code>m</code><span> ausgeführt, in der mit </span><code>pthread_create</code><span> der Thread </span><code>i</code><span> gestartet wird</span></em><span>&quot;. </span></p><p><em><span>Hinweis: Bitte verwenden Sie die Rechtschreibprüfung Ihres Editors und lesen Sie Ihre Ausarbeitung vor der Abgabe nochmals gründlich durch.</span></em></p><p><em><span>Hinweis:  In begründeten Ausnahmefällen kann die Ausarbeitung in englischer Sprache vorlegt werden; dies ist aber vor Beginn der Bearbeitung mit dem Prüfenden zu klären.</span></em></p><h2 id='bereitgestellte-materialien'><span>Bereitgestellte Materialien</span></h2><p><span>Es werden folgende Textdokumente, Programme und Shell-Skripte (für das Betriebssystem Linux) auf der Webseite der Veranstaltung</span></p><p><span> </span><a href='https://www.ti.uni-bielefeld.de/html/teaching/SS22/techinf2/index.html'><span>https://www.ti.uni-bielefeld.de/html/teaching/SS22/techinf2/index.html</span></a><span> </span></p><p><span>bereitgestellt:</span></p><ul><li><span>dieses Dokument im PDF- und HTML-Format</span></li><li><code>Anleitung_E-Pruefung_BS.PDF</code><span>: Anleitung für die E-Prüfung</span></li><li><code>ausarbeitung_emustermann.tex</code><span> </span><strong><span>(bitte Account-Namen im Dateinamen sowie Angaben zu Ihrer Person in der Datei vor der Abgabe anpassen)</span></strong><span>: Latex-Vorlage für die Ausarbeitung. Die daraus mit </span><code>pdflatex</code><span> erzeugte PDF-Datei liegt ebenfalls bei.</span></li><li><span>Eingabe-Datei </span><code>hsl_codebook.txt.gz</code><span>. Bitte entpacken Sie diese mit </span><code>gunzip</code><span>.</span></li></ul><h2 id='rechnerpool'><span>Rechnerpool</span></h2><p><span>Wie in den Übungen im SS22 können Sie den Rechnerpool </span><code>bonete01</code><span> bis </span><code>bonete14.ti.uni-bielefeld.de</code><span> benutzen. Prüfen Sie bitte bei Zeitmessungen, ob Sie gerade allein auf der Maschine arbeiten.</span></p><p>&nbsp;</p></div></div>
</body>
</html>
